from aiogram import Bot
from apscheduler.schedulers.asyncio import AsyncIOScheduler
from datetime import datetime

class Scheduler:
    def __init__(self, bot: Bot, chat_id: int):
        self.bot = bot
        self.chat_id = chat_id
        self.scheduler = AsyncIOScheduler()

    async def send_message(self):
        """
        –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –∫–∞–∂–¥—ã–π —á–∞—Å
        """
        print('–°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ')
        message_text = (
               "–ü—Ä–∏–≤–µ—Ç! üåü –ó–Ω–∞–µ—à—å, —á—Ç–æ –¥–µ–ª–∞–µ—Ç –Ω–∞—Å —Å—á–∞—Å—Ç–ª–∏–≤–µ–µ –∏ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–µ–µ? –ñ–∏–∑–Ω—å –≤ —á–∏—Å—Ç–æ–π –∏ —É—é—Ç–Ω–æ–π –∫–≤–∞—Ä—Ç–∏—Ä–µ! üåø‚ú®\n\n"
               "–°–µ–≥–æ–¥–Ω—è —Å–∞–º–æ–µ –≤—Ä–µ–º—è –Ω–∞–≤–µ—Å—Ç–∏ –ø–æ—Ä—è–¥–æ–∫, –ø–æ—Ç–æ–º—É —á—Ç–æ:\n"
               "- –£–±–æ—Ä–∫–∞ –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –Ω–µ —Ç–æ–ª—å–∫–æ –≤–æ–∫—Ä—É–≥, –Ω–æ –∏ –≤ —Ç–≤–æ–µ–π –≥–æ–ª–æ–≤–µ. üßò‚Äç‚ôÇÔ∏è\n"
               "- –ß–∏—Å—Ç–∞—è –∫–≤–∞—Ä—Ç–∏—Ä–∞ –ø–æ–º–æ–≥–∞–µ—Ç –ª—É—á—à–µ –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –∏ –æ—Ç–¥—ã—Ö–∞—Ç—å. üå∏\n"
               "- –£–±–æ—Ä–∫–∞ ‚Äî —ç—Ç–æ –æ—Ç–ª–∏—á–Ω–∞—è —Ñ–∏–∑–∏—á–µ—Å–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞. üí™\n\n"
               "–ü—Ä–µ–¥—Å—Ç–∞–≤—å —Å–µ–±–µ, –∫–∞–∫ –ø—Ä–∏—è—Ç–Ω–æ –±—É–¥–µ—Ç –∑–∞–≤–∞—Ä–∏—Ç—å —á–∞—à–∫—É –ª—é–±–∏–º–æ–≥–æ —á–∞—è –≤ —á–∏—Å—Ç–æ–π –∫—É—Ö–Ω–µ –∏–ª–∏ –æ—Ç–¥–æ—Ö–Ω—É—Ç—å –Ω–∞ —Å–≤–µ–∂–µ–º –¥–∏–≤–∞–Ω–µ. ‚òïÔ∏è "
               "–ñ–∏–∑–Ω—å —Å—Ç–∞–Ω–µ—Ç –≥–æ—Ä–∞–∑–¥–æ –ø—Ä–∏—è—Ç–Ω–µ–µ, –∏ —Ç—ã –ø–æ—á—É–≤—Å—Ç–≤—É–µ—à—å –ø—Ä–∏–ª–∏–≤ –Ω–æ–≤—ã—Ö —Å–∏–ª!\n\n"
               "–î–∞–≤–∞–π, –Ω–∞—á–Ω–∏ –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å! –í–∫–ª—é—á–∏ –ª—é–±–∏–º—É—é –º—É–∑—ã–∫—É, –≤–æ–∑—å–º–∏ –≥—É–±–∫—É –≤ —Ä—É–∫–∏ –∏ –ø—Ä–µ–≤—Ä–∞—Ç–∏ —É–±–æ—Ä–∫—É –≤ –≤–µ—Å—ë–ª—ã–π –ø—Ä–æ—Ü–µ—Å—Å! üé∂üßΩ "
               "–¢—ã —Å–ø—Ä–∞–≤–∏—à—å—Å—è, –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–∏—è—Ç–Ω–æ —É–¥–∏–≤–∏—Ç! üòä\n\n"
               "–£–¥–∞—á–∏ —Ç–µ–±–µ, –∏ –ø—É—Å—Ç—å —Ç–≤–æ–π –¥–æ–º —Å–∏—è–µ—Ç —á–∏—Å—Ç–æ—Ç–æ–π! üåü"
           )
        await self.bot.send_message(chat_id=self.chat_id, text=f"–°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}")
        await self.bot.send_message(chat_id=self.chat_id, text=message_text)
    def start(self):
        """
        –ó–∞–ø—É—Å–∫ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞ –∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
        """
        self.scheduler.add_job(self.send_message, 'cron', minute='*')
        self.scheduler.start()
